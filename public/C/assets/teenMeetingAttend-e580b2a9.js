import{aC as k,d as C,r as P,S as R,an as B,e as v,L as d,Z as o,Q as a,M as D,O as l,P as r,aJ as h,U as S,T as i,aG as V,bi as T,aq as g,ap as u,aO as b,F as p,aP as A,aN as F,cC as M}from"./index-1019b754.js";import{u as G}from"./use-message-86b9c1b3.js";import{N as L}from"./Tag-7fc8363d.js";const q={get:async m=>await k.post({url:"/teemMeetingAttend/get",data:m})},z={key:1,class:"mt-5"},O={class:"text-[10px]"},U={class:"text-md font-bold"},Z=C({__name:"teenMeetingAttend",setup(m){const w=G(),t=P({api:{getTeenMeetingAttend:null},data:{password:""},current:{page:"password"},isDisabled:!0}),{mutate:y,isPending:x}=R({mutationFn:()=>q.get({password:t.value.data.password}),onSuccess:s=>{var e;if(((e=s==null?void 0:s.response)==null?void 0:e.status)===401){w.error("密碼錯誤");return}t.value.current.page="dataPage",t.value.api.getTeenMeetingAttend=s}});B(t.value.data,s=>{s.password.length>=3&&(t.value.isDisabled=!1)});const N=v(()=>{var s,e,n;return{青職:((s=t.value.api.getTeenMeetingAttend)==null?void 0:s.data.ageRange.youth.data)||[],大專:((e=t.value.api.getTeenMeetingAttend)==null?void 0:e.data.ageRange.college.data)||[],其他:((n=t.value.api.getTeenMeetingAttend)==null?void 0:n.data.ageRange.other.data)||[]}}),_=v(()=>{var s,e;return(e=(s=t.value.api.getTeenMeetingAttend)==null?void 0:s.data.ageRange.youth.data[0])!=null&&e.updatedAt?new Date(t.value.api.getTeenMeetingAttend.data.ageRange.youth.data[0].updatedAt).toLocaleString("zh-TW",{timeZone:"Asia/Taipei"}):"無更新資料"});return(s,e)=>(d(),o("div",null,[a(t).current.page==="password"?(d(),D(a(V),{key:0,class:"max-w-[300px]",title:"密碼"},{default:l(()=>[r(a(h),{value:a(t).data.password,"onUpdate:value":e[0]||(e[0]=n=>a(t).data.password=n),class:"mb-2"},null,8,["value"]),r(a(S),{disabled:a(t).isDisabled,type:"primary",loading:a(x),onClick:e[1]||(e[1]=n=>a(y)())},{default:l(()=>e[2]||(e[2]=[i(" 確認 ")])),_:1},8,["disabled","loading"])]),_:1})):T("",!0),a(t).current.page==="dataPage"?(d(),o("div",z,[e[4]||(e[4]=g("span",{class:"text-sm font-bold"}," 28會所青年特會報名情形： ",-1)),g("p",O," 資料更新日期："+u(a(_))+" (每天晚上20:00後更新資料) ",1),r(a(F),{type:"line",animated:"","default-value":"會所報名情形"},{default:l(()=>[r(a(b),{name:"會所報名情形",tab:"會所報名情形"},{default:l(()=>[(d(!0),o(p,null,A(a(N),(n,c)=>(d(),o(p,{key:c},[g("p",U,u(c)+" ("+u(n.length)+"位) ",1),(d(!0),o(p,null,A(n,f=>(d(),o("span",{key:f._id,class:"text-sm mx-1"},[r(a(L),{class:"mb-1",size:"small",bordered:!1},{default:l(()=>[i(u(f.name),1)]),_:2},1024)]))),128))],64))),128))]),_:1}),r(a(b),{name:"數據",tab:"數據"},{default:l(()=>e[3]||(e[3]=[i(" 數據 ")])),_:1})]),_:1})])):T("",!0)]))}});typeof M=="function"&&M(Z);export{Z as default};
