import{aC as k,d as C,r as R,S as P,an as h,e as T,L as d,Z as o,Q as a,M as B,O as i,P as l,aJ as D,U as S,T as g,aG as V,bi as p,aq as m,ap as u,aO as A,F as c,aP as M,aN as F,cC as b}from"./index-8e39a457.js";import{u as G}from"./use-message-29f8b64e.js";import{N as L}from"./Tag-14300eb1.js";const q={get:async f=>await k.post({url:"/teemMeetingAttend/get",data:f})},z={key:1,class:"mt-5"},O={class:"text-[10px]"},U={class:"text-md font-bold"},Z={key:0,class:"text-xs"},E=C({__name:"teenMeetingAttend",setup(f){const x=G(),t=R({api:{getTeenMeetingAttend:null},data:{password:""},current:{page:"password"},isDisabled:!0}),{mutate:y,isPending:_}=P({mutationFn:()=>q.get({password:t.value.data.password}),onSuccess:s=>{var e;if(((e=s==null?void 0:s.response)==null?void 0:e.status)===401){x.error("密碼錯誤");return}t.value.current.page="dataPage",t.value.api.getTeenMeetingAttend=s}});h(t.value.data,s=>{s.password.length>=3&&(t.value.isDisabled=!1)});const w=T(()=>{var s,e,n,r;return{青職_目標28位:((s=t.value.api.getTeenMeetingAttend)==null?void 0:s.data.ageRange.youth.data)||[],大專:((e=t.value.api.getTeenMeetingAttend)==null?void 0:e.data.ageRange.college.data)||[],青少年:((n=t.value.api.getTeenMeetingAttend)==null?void 0:n.data.ageRange.teenager.data)||[],其他:((r=t.value.api.getTeenMeetingAttend)==null?void 0:r.data.ageRange.other.data)||[]}}),N=T(()=>{var s,e;return(e=(s=t.value.api.getTeenMeetingAttend)==null?void 0:s.data.ageRange.youth.data[0])!=null&&e.updatedAt?new Date(t.value.api.getTeenMeetingAttend.data.ageRange.youth.data[0].updatedAt).toLocaleString("zh-TW",{timeZone:"Asia/Taipei"}):"無更新資料"});return(s,e)=>(d(),o("div",null,[a(t).current.page==="password"?(d(),B(a(V),{key:0,class:"max-w-[300px]",title:"密碼"},{default:i(()=>[l(a(D),{value:a(t).data.password,"onUpdate:value":e[0]||(e[0]=n=>a(t).data.password=n),class:"mb-2"},null,8,["value"]),l(a(S),{disabled:a(t).isDisabled,type:"primary",loading:a(_),onClick:e[1]||(e[1]=n=>a(y)())},{default:i(()=>e[2]||(e[2]=[g(" 確認 ")])),_:1},8,["disabled","loading"])]),_:1})):p("",!0),a(t).current.page==="dataPage"?(d(),o("div",z,[e[4]||(e[4]=m("span",{class:"text-sm font-bold"}," 28會所青年特會報名情形： ",-1)),m("p",O," 資料更新日期："+u(a(N))+" (每天晚上20:00後更新資料) ",1),l(a(F),{type:"line",animated:"","default-value":"會所報名情形"},{default:i(()=>[l(a(A),{name:"會所報名情形",tab:"會所報名情形"},{default:i(()=>[(d(!0),o(c,null,M(a(w),(n,r)=>(d(),o(c,{key:r},[m("p",U,u(r)+" (報名"+u(n.length)+"位) ",1),(d(!0),o(c,null,M(n,v=>(d(),o("span",{key:v._id,class:"text-sm mx-1"},[l(a(L),{class:"mb-1",size:"small",bordered:!1},{default:i(()=>[g(u(v.name),1)]),_:2},1024)]))),128)),r==="青少年"?(d(),o("p",Z," 備注：青少年港湖有自己的表單，實際人數以港湖表單為主 ")):p("",!0)],64))),128))]),_:1}),l(a(A),{name:"數據",tab:"數據"},{default:i(()=>e[3]||(e[3]=[g(" 數據 ")])),_:1})]),_:1})])):p("",!0)]))}});typeof b=="function"&&b(E);export{E as default};
