import{aC as x,d as N,r as _,S as h,an as C,e as m,L as d,Z as i,Q as n,M as B,O as v,P as A,aJ as D,U as P,T as S,aG as V,bi as M,aq as l,ap as u,F as r,aP as T,cE as f}from"./index-92fc2b15.js";import{u as F}from"./use-message-22db6db8.js";const G={get:async p=>await x.post({url:"/teemMeetingAttend/get",data:p})},L={key:1},q={class:"text-lg font-bold"},E=N({__name:"teenMeetingAttend",setup(p){const w=F(),e=_({api:{getTeenMeetingAttend:null},data:{password:""},current:{page:"password"},isDisabled:!0}),{mutate:y,isPending:b}=h({mutationFn:()=>G.get({password:e.value.data.password}),onSuccess:a=>{var t;if(((t=a==null?void 0:a.response)==null?void 0:t.status)===401){w.error("密碼錯誤");return}e.value.current.page="dataPage",e.value.api.getTeenMeetingAttend=a,console.log("state.value.api.getTeenMeetingAttend",e.value.api.getTeenMeetingAttend)}});C(e.value.data,a=>{a.password.length>=3&&(e.value.isDisabled=!1)});const k=m(()=>{var a,t,s,g,o,c;return{青職:((a=e.value.api.getTeenMeetingAttend)==null?void 0:a.data.ageRange.youth.data)||[],大專:((t=e.value.api.getTeenMeetingAttend)==null?void 0:t.data.ageRange.college.data)||[],青少年:((s=e.value.api.getTeenMeetingAttend)==null?void 0:s.data.ageRange.teenager.data)||[],兒童1:((g=e.value.api.getTeenMeetingAttend)==null?void 0:g.data.ageRange.child1.data)||[],兒童2:((o=e.value.api.getTeenMeetingAttend)==null?void 0:o.data.ageRange.child2.data)||[],兒童3:((c=e.value.api.getTeenMeetingAttend)==null?void 0:c.data.ageRange.child3.data)||[]}}),R=m(()=>{var a,t;return(t=(a=e.value.api.getTeenMeetingAttend)==null?void 0:a.data.ageRange.youth.data[0])!=null&&t.updatedAt?new Date(e.value.api.getTeenMeetingAttend.data.ageRange.youth.data[0].updatedAt).toLocaleString("zh-TW",{timeZone:"Asia/Taipei"}):"無更新資料"});return(a,t)=>(d(),i("div",null,[n(e).current.page==="password"?(d(),B(n(V),{key:0,title:"密碼"},{default:v(()=>[A(n(D),{value:n(e).data.password,"onUpdate:value":t[0]||(t[0]=s=>n(e).data.password=s),class:"mb-2"},null,8,["value"]),A(n(P),{disabled:n(e).isDisabled,type:"primary",loading:n(b),onClick:t[1]||(t[1]=s=>n(y)())},{default:v(()=>t[2]||(t[2]=[S(" 確認 ")])),_:1},8,["disabled","loading"])]),_:1})):M("",!0),n(e).current.page==="dataPage"?(d(),i("div",L,[t[3]||(t[3]=l("p",{class:"text-lg font-bold"}," 28會所專項報名情形： ",-1)),l("p",null," 資料更新日期："+u(n(R)),1),(d(!0),i(r,null,T(n(k),(s,g)=>(d(),i(r,{key:g},[l("p",q,u(g),1),(d(!0),i(r,null,T(s,o=>(d(),i("span",{key:o._id,class:"text-sm mx-1"},u(o.name)+", ",1))),128))],64))),128))])):M("",!0)]))}});typeof f=="function"&&f(E);export{E as default};
