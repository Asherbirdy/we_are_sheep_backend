import{aC as P,d as B,r as S,S as V,an as F,e as p,L as l,Z as i,Q as n,M as G,O as o,P as u,aJ as q,U as z,T as A,aG as O,bi as _,aq as d,ap as r,aO as f,F as m,aP as v,aN as U,cC as T}from"./index-5f428e13.js";import{u as Z}from"./use-message-0ba955df.js";import{N as h}from"./Tag-18b3921a.js";const E={get:async b=>await P.post({url:"/teemMeetingAttend/get",data:b})},I={key:1,class:"mt-5"},J={class:"text-[10px]"},Q={class:"text-md font-bold"},W={class:"text-md font-extrabold"},$={class:"text-sm mb-2"},j={class:"text-md font-extrabold"},H={class:"text-sm mb-2"},K={class:"text-md font-extrabold"},X={class:"text-sm mb-2"},Y={class:"text-md font-extrabold"},ee={class:"text-sm mb-2"},te=B({__name:"teenMeetingAttend",setup(b){const M=Z(),s=S({api:{getTeenMeetingAttend:null},data:{password:""},current:{page:"password"},isDisabled:!0}),{mutate:y,isPending:w}=V({mutationFn:()=>E.get({password:s.value.data.password}),onSuccess:a=>{var e;if(((e=a==null?void 0:a.response)==null?void 0:e.status)===401){M.error("密碼錯誤");return}s.value.current.page="dataPage",s.value.api.getTeenMeetingAttend=a}});F(s.value.data,a=>{a.password.length>=3&&(s.value.isDisabled=!1)});const k=p(()=>{var a,e,t,g;return{青職_目標28位:((a=s.value.api.getTeenMeetingAttend)==null?void 0:a.data.ageRange.youth.data)||[],"大專/青少年_目標16位":[...((e=s.value.api.getTeenMeetingAttend)==null?void 0:e.data.ageRange.college.data)||[],...((t=s.value.api.getTeenMeetingAttend)==null?void 0:t.data.ageRange.teenager.data)||[]],其他:((g=s.value.api.getTeenMeetingAttend)==null?void 0:g.data.ageRange.other.data)||[]}}),N=p(()=>{var a,e;return(e=(a=s.value.api.getTeenMeetingAttend)==null?void 0:a.data.ageRange.youth.data[0])!=null&&e.updatedAt?new Date(s.value.api.getTeenMeetingAttend.data.ageRange.youth.data[0].updatedAt).toLocaleString("zh-TW",{timeZone:"Asia/Taipei"}):"無更新資料"}),x=p(()=>{var a,e,t,g;return[...((a=s.value.api.getTeenMeetingAttend)==null?void 0:a.data.ageRange.youth.data)||[],...((e=s.value.api.getTeenMeetingAttend)==null?void 0:e.data.ageRange.college.data)||[],...((t=s.value.api.getTeenMeetingAttend)==null?void 0:t.data.ageRange.teenager.data)||[],...((g=s.value.api.getTeenMeetingAttend)==null?void 0:g.data.ageRange.other.data)||[]]}),L=p(()=>x.value.filter(a=>a.district==="一區")),R=p(()=>x.value.filter(a=>a.district==="二區")),C=p(()=>x.value.filter(a=>a.district==="三區")),D=p(()=>x.value.filter(a=>a.district==="四區"));return(a,e)=>(l(),i("div",null,[n(s).current.page==="password"?(l(),G(n(O),{key:0,class:"max-w-[300px]",title:"密碼"},{default:o(()=>[u(n(q),{value:n(s).data.password,"onUpdate:value":e[0]||(e[0]=t=>n(s).data.password=t),class:"mb-2"},null,8,["value"]),u(n(z),{disabled:n(s).isDisabled,type:"primary",loading:n(w),onClick:e[1]||(e[1]=t=>n(y)())},{default:o(()=>e[2]||(e[2]=[A(" 確認 ")])),_:1},8,["disabled","loading"])]),_:1})):_("",!0),n(s).current.page==="dataPage"?(l(),i("div",I,[e[11]||(e[11]=d("span",{class:"text-sm font-bold"}," 28會所青年特會報名情形： ",-1)),d("p",J," 資料更新日期："+r(n(N))+" (每天晚上20:00後更新資料) ",1),u(n(U),{type:"line",animated:"","default-value":"會所報名情形"},{default:o(()=>[u(n(f),{name:"會所報名情形",tab:"會所報名情形"},{default:o(()=>[(l(!0),i(m,null,v(n(k),(t,g)=>(l(),i(m,{key:g},[d("p",Q,r(g)+" (已報名"+r(t.length)+"位) ",1),(l(!0),i(m,null,v(t,c=>(l(),i("span",{key:c._id,class:"text-sm mx-1"},[u(n(h),{class:"mb-1",size:"small",bordered:!1},{default:o(()=>[A(r(c.name),1)]),_:2},1024)]))),128))],64))),128))]),_:1}),u(n(f),{name:"一區",tab:"一區"},{default:o(()=>[e[4]||(e[4]=d("div",{class:"text-md font-bold text-[16px]"}," 一區代禱名單: ",-1)),(l(!0),i(m,null,v(n(L).filter(t=>t.inviteList!=="無"),t=>(l(),i("div",{key:t._id},[d("span",W,r(t.name)+"： ",1),e[3]||(e[3]=d("br",null,null,-1)),d("div",$,r(t.inviteList),1)]))),128))]),_:1}),u(n(f),{name:"二區",tab:"二區"},{default:o(()=>[e[6]||(e[6]=d("div",{class:"text-md font-bold text-[16px]"}," 二區代禱名單: ",-1)),(l(!0),i(m,null,v(n(R).filter(t=>t.inviteList!=="無"),t=>(l(),i("div",{key:t._id},[d("span",j,r(t.name)+"： ",1),e[5]||(e[5]=d("br",null,null,-1)),d("div",H,r(t.inviteList),1)]))),128))]),_:1}),u(n(f),{name:"三區",tab:"三區"},{default:o(()=>[e[8]||(e[8]=d("div",{class:"text-md font-bold text-[16px]"}," 三區代禱名單: ",-1)),(l(!0),i(m,null,v(n(C).filter(t=>t.inviteList!=="無"),t=>(l(),i("div",{key:t._id},[d("span",K,r(t.name)+"： ",1),e[7]||(e[7]=d("br",null,null,-1)),d("div",X,r(t.inviteList),1)]))),128))]),_:1}),u(n(f),{name:"四區",tab:"四區"},{default:o(()=>[e[10]||(e[10]=d("div",{class:"text-md font-bold text-[16px]"}," 四區代禱名單: ",-1)),(l(!0),i(m,null,v(n(D).filter(t=>t.inviteList!=="無"),t=>(l(),i("div",{key:t._id},[d("span",Y,r(t.name)+"： ",1),e[9]||(e[9]=d("br",null,null,-1)),d("div",ee,r(t.inviteList),1)]))),128))]),_:1})]),_:1})])):_("",!0)]))}});typeof T=="function"&&T(te);export{te as default};
