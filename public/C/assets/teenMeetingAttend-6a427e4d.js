import{aC as C,d as P,r as S,S as B,an as F,e as T,L as l,Z as u,Q as a,M as L,O as o,P as p,aJ as V,U as z,T as f,aG as G,bi as b,aq as d,ap as i,aO as w,F as A,aP as y,aN as q,cC as N}from"./index-44d43a03.js";import{u as O}from"./use-message-cbe83e38.js";import{N as U}from"./Tag-7859f8fa.js";const W={get:async M=>await C.post({url:"/teemMeetingAttend/get",data:M})},Z={key:1,class:"mt-5"},E={style:{margin:"0"}},I={style:{margin:"0"}},J={style:{margin:"0"}},Q={style:{margin:"0"}},$={class:"text-md font-bold"},j=P({__name:"teenMeetingAttend",setup(M){const h=O(),t=S({api:{getTeenMeetingAttend:null},data:{password:""},current:{page:"password"},isDisabled:!0}),{mutate:k,isPending:x}=B({mutationFn:()=>W.get({password:t.value.data.password}),onSuccess:n=>{var e;if(((e=n==null?void 0:n.response)==null?void 0:e.status)===401){h.error("密碼錯誤");return}t.value.current.page="dataPage",t.value.api.getTeenMeetingAttend=n}});F(t.value.data,n=>{n.password.length>=3&&(t.value.isDisabled=!1)});const D=T(()=>{var n,e,s,g,r,m,v;return{青職:((n=t.value.api.getTeenMeetingAttend)==null?void 0:n.data.ageRange.youth.data)||[],大專:((e=t.value.api.getTeenMeetingAttend)==null?void 0:e.data.ageRange.college.data)||[],青少年:((s=t.value.api.getTeenMeetingAttend)==null?void 0:s.data.ageRange.teenager.data)||[],其他:((g=t.value.api.getTeenMeetingAttend)==null?void 0:g.data.ageRange.other.data)||[],兒童1:((r=t.value.api.getTeenMeetingAttend)==null?void 0:r.data.ageRange.child1.data)||[],兒童2:((m=t.value.api.getTeenMeetingAttend)==null?void 0:m.data.ageRange.child2.data)||[],兒童3:((v=t.value.api.getTeenMeetingAttend)==null?void 0:v.data.ageRange.child3.data)||[]}}),c=T(()=>{var n,e,s,g,r,m,v;return[...((n=t.value.api.getTeenMeetingAttend)==null?void 0:n.data.ageRange.youth.data)||[],...((e=t.value.api.getTeenMeetingAttend)==null?void 0:e.data.ageRange.college.data)||[],...((s=t.value.api.getTeenMeetingAttend)==null?void 0:s.data.ageRange.teenager.data)||[],...((g=t.value.api.getTeenMeetingAttend)==null?void 0:g.data.ageRange.other.data)||[],...((r=t.value.api.getTeenMeetingAttend)==null?void 0:r.data.ageRange.child1.data)||[],...((m=t.value.api.getTeenMeetingAttend)==null?void 0:m.data.ageRange.child2.data)||[],...((v=t.value.api.getTeenMeetingAttend)==null?void 0:v.data.ageRange.child3.data)||[]]}),R=T(()=>c.value.filter(n=>n.meetingStatus==="福音朋友")),_=T(()=>{var n,e;return(e=(n=t.value.api.getTeenMeetingAttend)==null?void 0:n.data.ageRange.youth.data[0])!=null&&e.updatedAt?new Date(t.value.api.getTeenMeetingAttend.data.ageRange.youth.data[0].updatedAt).toLocaleString("zh-TW",{timeZone:"Asia/Taipei"}):"無更新資料"});return(n,e)=>(l(),u("div",null,[a(t).current.page==="password"?(l(),L(a(G),{key:0,class:"max-w-[300px]",title:"密碼"},{default:o(()=>[p(a(V),{value:a(t).data.password,"onUpdate:value":e[0]||(e[0]=s=>a(t).data.password=s),class:"mb-2"},null,8,["value"]),p(a(z),{disabled:a(t).isDisabled,type:"primary",loading:a(x),onClick:e[1]||(e[1]=s=>a(k)())},{default:o(()=>e[2]||(e[2]=[f(" 確認 ")])),_:1},8,["disabled","loading"])]),_:1})):b("",!0),a(t).current.page==="dataPage"?(l(),u("div",Z,[e[8]||(e[8]=d("span",{class:"text-lg font-bold"}," 28會所青年特會報名情形： ",-1)),e[9]||(e[9]=d("p",{style:{margin:"0"}}," 更新日期： ",-1)),d("p",E,i(a(_))+" (每天晚上20:00後更新資料) ",1),p(a(q),{type:"line",animated:"","default-value":"數據"},{default:o(()=>[p(a(w),{name:"數據",tab:"數據"},{default:o(()=>[d("p",I,i(new Date().toLocaleDateString("zh-TW",{year:"numeric",month:"2-digit",day:"2-digit"})),1),e[4]||(e[4]=d("p",{style:{margin:"0"}}," 28會所 青年特會報名情形： ",-1)),e[5]||(e[5]=d("p",{style:{margin:"0"}}," 大會負擔：一人邀約一位 ",-1)),e[6]||(e[6]=d("p",{style:{margin:"0"}}," 會所總目標： 180人 ",-1)),d("p",J," 目前已報名人數："+i(a(c).length)+"人 ",1),e[7]||(e[7]=d("br",null,null,-1)),d("p",Q," 確定參加的福音朋友（"+i(a(R).length)+"人）： ",1),(l(!0),u(A,null,y(a(R),(s,g)=>(l(),u("span",{key:s._id},[f(i(g+1)+". "+i(s.name)+" (照顧者："+i(s.sheepherd)+")",1),e[3]||(e[3]=d("br",null,null,-1))]))),128))]),_:1}),p(a(w),{name:"會所報名情形",tab:"會所報名情形"},{default:o(()=>[(l(!0),u(A,null,y(a(D),(s,g)=>(l(),u(A,{key:g},[d("p",$,i(g)+"（"+i(s.length)+"人） ",1),(l(!0),u(A,null,y(s,r=>(l(),u("span",{key:r._id,class:"text-sm mx-1"},[p(a(U),{size:"small",bordered:!1},{default:o(()=>[f(i(r.name),1)]),_:2},1024)]))),128))],64))),128))]),_:1})]),_:1})])):b("",!0)]))}});typeof N=="function"&&N(j);export{j as default};
