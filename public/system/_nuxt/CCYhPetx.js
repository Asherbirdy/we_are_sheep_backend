import{f as ee,r as f,K as T,o as i,c as _,a,F as E,O as L,P as se,b as t,w as o,d as y,t as j,H as B,G as F,h as k,I as te,an as U,ao as C,e as ae,k as oe,y as le,_ as ne}from"./B0J0WvHt.js";import{_ as re}from"./DXDzdJOA.js";import{a as ie,_ as ue}from"./xO2dniIr.js";import{_ as de}from"./Dozi95TJ.js";import{u as I}from"./8J3O6u9P.js";import{P as S}from"./rj6rKEoh.js";import{c as O,a as v}from"./DS_ed5Xt.js";import"./CRmINWLG.js";import"./DYXc8vUg.js";import"./DDfxx48F.js";const me={class:"flex flex-col min-h-screen"},ce={class:"bg-gray-100 p-4 flex justify-between"},pe={class:"hidden md:block"},fe={class:"flex space-x-4"},_e={class:"flex-grow mx-2"},ve={class:"fixed bottom-0 left-0 right-0 bg-gray-100 shadow-lg none md:hidden"},ge={class:"grid grid-cols-3 h-16"},xe={class:"relative z-10"},be={class:"flex"},we={class:"form-box p-4"},ye={class:"flex justify-center"},ke={class:"flex justify-center"},Ve={key:0,class:"result-status p-4"},he={key:0,class:"flex flex-col items-center justify-center"},Ue={key:1,class:"flex flex-col items-center justify-center"},Ce=ee({__name:"default",async setup(Se){let n,g;const R=[{label:"生命讀經",to:S.Home},{label:"近期活動",to:S.News},{label:"會員中心",to:S.Login}],x=f(!1),c=f(!1);f(!0);const b=f(null),A=O({email:v().email("Invalid email").required("Required"),password:v().min(8,"Must be at least 8 characters").required("Required")}),M=O({email:v().email("無效emai").required("Required"),password:v().min(8,"Must be at least 8 characters").required("Required"),confirmPassword:v().required("Required"),serialNumber:v().required("Required")}),r=f({email:"asherbirder@gmail.com",password:"password"}),l=f({name:"",email:"@gmail.com",password:"password",confirmPassword:"password",serialNumber:""}),{data:V,execute:G,error:J,status:$}=([n,g]=T(()=>I.login(r.value)),n=await n,g(),n),{data:h,execute:z,error:H,status:W}=([n,g]=T(()=>I.register(l.value)),n=await n,g(),n),D=()=>{c.value=!0},K=()=>{c.value=!1},w=p=>{b.value=p,setTimeout(()=>{b.value=null},2e3)},Q=async p=>{await G(),console.log(r.value.email),console.log(r.value.password),console.log("LoginState",p.data),J.value&&w(!1);const e=U(C.AccessToken),u=U(C.RefreshToken);V.value&&(e.value=V.value.token.accessTokenJWT,u.value=V.value.token.refreshTokenJWT,w(!0))},X=async p=>{var u;await z(),H.value&&(alert("註冊錯誤"),w(!1));const e=U(C.TokenUser);h.value&&(console.log(h.value),e.value=JSON.stringify((u=h.value)==null?void 0:u.tokenUser),w(!0),c.value=!0)},Y=()=>{x.value=!x.value,console.log("彈窗被打開")};return(p,e)=>{const u=ae,d=re,m=ie,q=oe,N=ue,P=le,Z=de;return i(),_("div",me,[a("header",ce,[e[8]||(e[8]=a("div",null,"LOGO",-1)),a("div",pe,[a("nav",fe,[(i(),_(E,null,L(R,s=>t(u,{key:s.to,to:s.to,class:"text-gray-600"},{default:o(()=>[y(j(s.label),1)]),_:2},1032,["to"])),64))])])]),a("main",_e,[se(p.$slots,"default",{},void 0,!0)]),a("nav",ve,[a("div",ge,[(i(),_(E,null,L(R,s=>a("div",{key:s.to,class:"flex items-center justify-center border-r border-gray-200 last:border-r-0"},[t(u,{to:s.to,class:"text-gray-600",onClick:Y},{default:o(()=>[y(j(s.label),1)]),_:2},1032,["to"])])),64))])]),a("div",xe,[t(Z,{modelValue:x.value,"onUpdate:modelValue":e[7]||(e[7]=s=>x.value=s)},{default:o(()=>[a("div",be,[a("button",{class:B(["base font rounded block flex-1 relative group",[{active:c.value}]]),onClick:D}," 登入 ",2),a("button",{class:B(["base font rounded block flex-1 relative group",[{active:!c.value}]]),onClick:K}," 註冊 ",2)]),a("div",we,[c.value?(i(),F(N,{key:0,schema:k(A),state:r.value,class:"space-y-4"},{default:o(()=>[t(m,{label:"Email",name:"email"},{default:o(()=>[t(d,{modelValue:r.value.email,"onUpdate:modelValue":e[0]||(e[0]=s=>r.value.email=s)},null,8,["modelValue"])]),_:1}),t(m,{label:"Password",name:"password"},{default:o(()=>[t(d,{modelValue:r.value.password,"onUpdate:modelValue":e[1]||(e[1]=s=>r.value.password=s),type:"password"},null,8,["modelValue"])]),_:1}),a("div",ye,[t(q,{loading:k($)==="pending",type:"submit",onClick:Q},{default:o(()=>e[9]||(e[9]=[y(" 登入 ")])),_:1},8,["loading"])])]),_:1},8,["schema","state"])):(i(),F(N,{key:1,schema:k(M),state:l.value,class:"space-y-4",onSubmit:X},{default:o(()=>[t(m,{label:"Name",name:"name"},{default:o(()=>[t(d,{modelValue:l.value.name,"onUpdate:modelValue":e[2]||(e[2]=s=>l.value.name=s)},null,8,["modelValue"])]),_:1}),t(m,{label:"Email",name:"email"},{default:o(()=>[t(d,{modelValue:l.value.email,"onUpdate:modelValue":e[3]||(e[3]=s=>l.value.email=s)},null,8,["modelValue"])]),_:1}),t(m,{label:"Password",name:"password"},{default:o(()=>[t(d,{modelValue:l.value.password,"onUpdate:modelValue":e[4]||(e[4]=s=>l.value.password=s),type:"password"},null,8,["modelValue"])]),_:1}),t(m,{label:"Confirm Password",name:"confirmPassword"},{default:o(()=>[t(d,{modelValue:l.value.confirmPassword,"onUpdate:modelValue":e[5]||(e[5]=s=>l.value.confirmPassword=s),type:"password"},null,8,["modelValue"])]),_:1}),t(m,{label:"序號",name:"serialnumber"},{default:o(()=>[t(d,{modelValue:l.value.serialNumber,"onUpdate:modelValue":e[6]||(e[6]=s=>l.value.serialNumber=s),type:"text"},null,8,["modelValue"])]),_:1}),a("div",ke,[t(q,{class:"bg-blue-500 text-white p-2 rounded-md",loading:k(W)==="pending",type:"submit"},{default:o(()=>e[10]||(e[10]=[y(" 註冊 ")])),_:1},8,["loading"])])]),_:1},8,["schema","state"]))]),b.value!==null?(i(),_("div",Ve,[b.value?(i(),_("div",he,[t(P,{name:"material-symbols:check-circle",class:"text-green-500 text-7xl"}),e[11]||(e[11]=a("div",{class:"text-white"},"成功",-1))])):(i(),_("div",Ue,[t(P,{name:"material-symbols:cancel",class:"text-red-500 text-7xl"}),e[12]||(e[12]=a("div",{class:"text-white"},"失敗",-1))]))])):te("",!0)]),_:1},8,["modelValue"])]),e[13]||(e[13]=a("footer",{class:"bg-gray-100 p-4 mt-16"},[a("div",{class:"text-center"},"Footer")],-1))])}}}),Ie=ne(Ce,[["__scopeId","data-v-8cf132e9"]]);export{Ie as default};
